<h1>BileMo</h1>

[![Codacy Badge](https://api.codacy.com/project/badge/Grade/8c003b01ff82497d885ae587db38103f)](https://www.codacy.com?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=TomCampion/BileMo-API-REST&amp;utm_campaign=Badge_Grade)

BileMo offers an API that allows you to:
<ul>

<li>
consult the list of BileMo products;
<li>
consult the details of a BileMo product;
<li>
consult the list of registered users linked to a client on the website;
<li>
consult the details of a registered user linked to a client;
<li>
add a new user linked to a customer;
<li>
delete a user added by a customer.
</ul>

## Installation
1 - Clone or download the GitHub repository in the desired folder:
```
    git clone https://github.com/TomCampion/BileMo-API-REST
```
2 - Install libraries by running : 
```
    composer install
```

3 - Generate the SSH keys for the JWT authentication :
```
$ mkdir -p config/jwt
$ openssl genpkey -out config/jwt/private.pem -aes256 -algorithm rsa -pkeyopt rsa_keygen_bits:4096
$ openssl pkey -in config/jwt/private.pem -out config/jwt/public.pem -pubout
```
4 - Configure your environment variables in the .env file

5 - Create the database if it does not already exist, type the command below :
```
    php bin/console doctrine:database:create
```
6 - Create the different tables in the database by applying the migrations :
```
    php bin/console doctrine:migrations:migrate
```

## Documentation

Once the project is installed, you can find a documentation generated by swagger by going to **/api** path and also a more detailed documentation generated by ReDoc on the following path: **/api?ui=re_doc**

Otherwise, here is a brief documentation :

### Connection
- **POST** /authentication_token
<br>Get authentication token.
    
    To connect you will need a token. To obtain this token, you just need to send your identifiers (name and password) in the body of the request, for example:
    ```
    {
      "name": "PhoneSeller",
	  "password": "pass"
    }
    ```  
    Once you have obtained this token you just have to pass this token by specifying the HTTP header "Authorization" with the "Bearer" method
    ```
    Authorization: BEARER token
    ```  
#### Product
- **GET** /api/products
<br>Retrieves the collection of Product resources.

- **GET** /api/products/{id}
<br>Retrieves a Product resource.

#### User
- **GET** /api/users
<br>Retrieves the collection of User resources related to to the current connected Customer.

- **POST** /api/users
<br>Creates a User resource.

    To create a user you must enter a last name, a first name and an email address in the body of the request, for example :<br>
    ```
    {
      "firstname": "John",
      "lastname": "Doe",
      "email": "jdoe@gmail.com"
    }
    ```
- **GET** /api/users/{id}
<br>Retrieves a User resource.

- **DELETE** /api/users/{id}
<br>Removes the User resource.
